language: python
python:
- '2.7'
- '3.4'
- '3.5'
- '3.6'
cache:
  directories:
  - "$HOME/.rpmlint/"
install:
- sudo apt-get install -y lintian
- if [[ $TRAVIS_PYTHON_VERSION != 2.6 ]]; then pip install pylint; fi
- pip install -r requirements.txt
before_script:
- if [[ "$TRAVIS_PYTHON_VERSION" = "2.7" ]]; then export IS_PRIMARY_MATRIX_JOB=true;
  fi
- SEMVER_REGEX="^v(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)(\-[0-9A-Za-z-]+(\.[0-9A-Za-z-]+)*)?(\+[0-9A-Za-z-]+(\.[0-9A-Za-z-]+)*)?$"
- |
- if [[ "$TRAVIS_TAG" =~ $SEMVER_REGEX ]]; then export PACKAGE_VERSION=${TRAVIS_TAG#v};
  fi
- echo $TRAVIS_TAG
- echo $PACKAGE_VERSION
- echo $IS_PRIMARY_MATRIX_JOB
script:
- python -c "import sys; print('python version:%s' % sys.version);"
- python -c "import sys; print('python version:%s' % sys.version[0]);"
- "./pylint-runner.py -s"
- python setup.py sdist bdist_wheel
before_deploy:
- PACKAGE_DATE=$(git log -1 --pretty="format:%ad" $TRAVIS_TAG --date=short);
- echo $PACKAGE_DATE;
after_deploy:
- cat $HOME/.pypirc
deploy:
- provider: pypi
  user: apptuit.ai
  distributions: sdist bdist_wheel
  on:
    tags: true
    condition: $PACKAGE_VERSION != "" && $IS_PRIMARY_MATRIX_JOB == "true"
  password:
    secure: "Ngnzj54Y2ACFOuYDONiZ8ZekXxqhChhvfLs6l8J4Bdqnskbu7XefFko2v1B1Y9sI2kmXh80etqgqJiv7jG/yT7+MA6CmYxz0gt/2qQuXkvaneQL4PRNByhi5AM8pSi0VdZFvdz26xpWlf8iRzhh0soRRoMdfZly/TKyMSGc68LiJYMwNYJ4tGnuB1LBqr+VZfd3GTIxyeWd8Os5AM8Ll/ndZWL0WbiYR/M6ulSFI1MsvHtSZDfaVkCb3vPehPOLY4FjZcFiB+epR1cYA6LmFVQxlrXTw29WbiaBseNNlG/JbJCKQNy/tpe8JR7xmIj+jqiBeEa0Rp12T1o8Qg7OyEXf/6fCAkoxAciRQNk40cvqfyjSA/StmPvyYVP1/xVHMaaY0xi7Gp0IRgfQdHG2WDCTTITdBHOq8h9XFdE/oNxJJIoKzBK5Kj4D2TKFhnA1lC8wKnOl+FaRQC086XOaKIe0L6dQzjSIUeMrkbh/8NjnKtOO30WbZYQTJD+JVtxIRyKlxkjnhjH/7DUPIaxJdBgcsvrZtb13PXc1YhPX59YxN7S+UUTrDo7LgOaspV8VxdXih8TjVlflpABnA5wTfEdT2LfieBMaq/4eFKDMm98tcg7idjAwTCVCd4qP0TxHsZeIky5qS7vkKyeLONs+qDt7l8hBY5sotcpClqu7Glvc="
